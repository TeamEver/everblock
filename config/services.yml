services:
    _defaults:
        autowire: true
        autoconfigure: true

    everblock.tools.import:
        class: Everblock\Tools\Command\ImportFileCommand
        public: true
        tags:
            - { name: 'console.command' }

    everblock.tools.import_tab:
        class: Everblock\Tools\Command\ImportTabCommand
        public: true
        tags:
            - { name: 'console.command' }

    everblock.tools.export:
        class: Everblock\Tools\Command\ExportFileCommand
        public: true
        tags:
            - { name: 'console.command' }

    everblock.tools.execute_action:
        class: Everblock\Tools\Command\ExecuteAction
        public: true
        tags:
            - { name: 'console.command' }

    everblock.tools.prettyblocks:
        class: Everblock\Tools\Command\PrettyBlocksCommand
        public: true
        tags:
            - { name: 'console.command' }

    everblock.tools.search_replace:
        class: Everblock\Tools\Command\SearchReplaceCommand
        public: true
        tags:
            - { name: 'console.command' }

    everblock.tools.clean_games:
        class: Everblock\Tools\Command\CleanGameDataCommand
        public: true
        tags:
            - { name: 'console.command' }

    everblock.grid.definition.factory.ever_block:
        class: Everblock\PrestaShopBundle\Grid\Definition\Factory\EverBlockGridDefinitionFactory
        public: true
        arguments:
            - '@translator'
            - '@prestashop.core.hook.dispatcher'

    everblock.grid.data.factory.ever_block:
        class: Everblock\PrestaShopBundle\Grid\Data\Factory\EverBlockGridDataFactory
        public: true
        arguments:
            - '@doctrine.dbal.default_connection'
            - '@prestashop.adapter.legacy.context'
            - '%database_prefix%'

    everblock.grid.factory.ever_block:
        class: PrestaShop\PrestaShop\Core\Grid\GridFactory
        public: true
        arguments:
            - '@everblock.grid.definition.factory.ever_block'
            - '@everblock.grid.data.factory.ever_block'
            - '@prestashop.core.grid.filter.form_factory'
            - '@prestashop.core.hook.dispatcher'

    Everblock\PrestaShopBundle\Service\EverBlockDatabaseMaintainer: ~

    Everblock\PrestaShopBundle\Service\EverBlockSqlExporter: ~

    Everblock\PrestaShopBundle\Service\EverBlockContentConverter: ~

    Everblock\PrestaShopBundle\Service\EverBlockCacheRefresher: ~

    Everblock\PrestaShopBundle\Service\EverBlockBulkActionIdsExtractor: ~

    Everblock\PrestaShopBundle\Domain\EverBlock\Repository\LegacyEverBlockRepository: ~

    Everblock\PrestaShopBundle\Domain\EverBlock\Repository\EverBlockRepositoryInterface:
        alias: Everblock\PrestaShopBundle\Domain\EverBlock\Repository\LegacyEverBlockRepository

    Everblock\PrestaShopBundle\Controller\Admin\EverBlockController:
        arguments:
            $duplicateHandler: '@Everblock\PrestaShopBundle\Domain\EverBlock\CommandHandler\DuplicateEverBlockHandler'
            $toggleStatusHandler: '@Everblock\PrestaShopBundle\Domain\EverBlock\CommandHandler\ToggleEverBlockStatusHandler'
            $exportSqlHandler: '@Everblock\PrestaShopBundle\Domain\EverBlock\CommandHandler\ExportEverBlockSqlHandler'
            $everBlockRepository: '@Everblock\PrestaShopBundle\Domain\EverBlock\Repository\EverBlockRepositoryInterface'
            $cacheRefresher: '@Everblock\PrestaShopBundle\Service\EverBlockCacheRefresher'
            $databaseMaintainer: '@Everblock\PrestaShopBundle\Service\EverBlockDatabaseMaintainer'
            $bulkActionIdsExtractor: '@Everblock\PrestaShopBundle\Service\EverBlockBulkActionIdsExtractor'
        tags:
            - { name: controller.service_arguments }

